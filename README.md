Telegram Bot: –£—á–µ—Ç –ø—Ä–æ–ø—É—Å–∫–æ–≤ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
–û–ø–∏—Å–∞–Ω–∏–µ
–≠—Ç–æ—Ç –∫–æ–¥ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π Telegram-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç —Å—Ç–∞—Ä–æ—Å—Ç–µ –≥—Ä—É–ø–ø—ã –≤–µ—Å—Ç–∏ —É—á–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –ø—Ä–æ–ø—É—Å–∫–∞—é—â–∏—Ö –ø–∞—Ä—ã. –ë–æ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—É–ª—å—â–∏–∫–æ–≤, –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤, –æ—á–∏—Å—Ç–∫–∏ –∑–∞–ø–∏—Å–µ–π –∏ –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
–ó–∞–ø–∏—Å—å –ø—Ä–æ–≥—É–ª—å—â–∏–∫–æ–≤
–ë–æ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±–∏—Ä–∞—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏–∑ —Å–ø–∏—Å–∫–∞ –∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –∏—Ö –≤ —Ñ–∞–π–ª —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –¥–∞—Ç—ã –∏ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–ø—É—Å–∫–∞.

–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª –ø—Ä–æ–≥—É–ª—å—â–∏–∫–∏.txt.

–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–≥—É–ª—å—â–∏–∫–æ–≤
–ë–æ—Ç –≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –ø—Ä–æ–ø—É—Å—Ç–∏–≤—à–∏—Ö –ø–∞—Ä—ã –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü.

–û—á–∏—Å—Ç–∫–∞ –∑–∞–ø–∏—Å–µ–π
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å–∏ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É.

–£–¥–æ–±–Ω–æ–µ –º–µ–Ω—é
–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
Python.

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞
pyTelegramBotAPI (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram Bot API).

–ò–º–ø–æ—Ä—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫
python
Copy
import telebot
import logging
from datetime import datetime
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞
python
Copy
BOT_API = '–í–ê–®_–¢–û–ö–ï–ù_–ë–û–¢–ê'
bot = telebot.TeleBot(BOT_API)
logging.basicConfig(level=logging.INFO)
–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
python
Copy
storage = {}  # –°–ª–æ–≤–∞—Ä—å –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–æ–º
–ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª
python
Copy
def write_to_file(data):
    with open("–ø—Ä–æ–≥—É–ª—å—â–∏–∫–∏.txt", "a") as file:
        file.write(data + "\n")
–ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞
python
Copy
def read_from_file():
    with open("–ø—Ä–æ–≥—É–ª—å—â–∏–∫–∏.txt", "r") as file:
        return file.readlines()
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–ø–∏—Å–µ–π –ø–æ –º–µ—Å—è—Ü—É
python
Copy
def filter_by_month(month):
    lines = read_from_file()
    return [line for line in lines if month in line]
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–ø–∏—Å–µ–π –ø–æ –¥–∞—Ç–µ
python
Copy
def filter_by_day(date):
    lines = read_from_file()
    return [line for line in lines if date in line]
–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
–ö–æ–º–∞–Ω–¥–∞ /start
python
Copy
@bot.message_handler(commands=['start'])
def start(message):
    bot.send_message(message.chat.id, "üëã –ü—Ä–∏–≤–µ—Ç, —Å—Ç–∞—Ä–æ—Å—Ç–∞! –Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –≤–µ—Å—Ç–∏ —É—á–µ—Ç –ø—Ä–æ–≥—É–ª—å—â–∏–∫–æ–≤.")
    show_main_menu(message.chat.id)
–ü–æ–∫–∞–∑ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
python
Copy
def show_main_menu(chat_id):
    markup = telebot.types.ReplyKeyboardMarkup(row_width=2)
    btn1 = telebot.types.KeyboardButton('üìã –°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤')
    btn2 = telebot.types.KeyboardButton('üìú –°–ø–∏—Å–æ–∫ –ø—Ä–æ–≥—É–ª—å—â–∏–∫–æ–≤')
    btn3 = telebot.types.KeyboardButton('üßπ –û—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫')
    markup.add(btn1, btn2, btn3)
    bot.send_message(chat_id, "–í—ã–±–µ—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=markup)
–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
python
Copy
@bot.message_handler(func=lambda message: message.text == 'üìã –°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤')
def select_students(message):
    markup = telebot.types.ReplyKeyboardMarkup(row_width=2)
    students = ["–ë–µ–ª–æ—É—Å–æ–≤ –°–µ—Ä–≥–µ–π", "–í–µ—Ä—à–∏–Ω–∏–Ω –ù–∏–∫–∏—Ç–∞", "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω"]
    for student in students:
        markup.add(telebot.types.KeyboardButton(student))
    markup.add(telebot.types.KeyboardButton('‚úÖ –ì–æ—Ç–æ–≤–æ'))
    bot.send_message(message.chat.id, "üë• –í—ã–±–µ—Ä–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:", reply_markup=markup)
–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö
python
Copy
@bot.message_handler(func=lambda message: message.text == '‚úÖ –ì–æ—Ç–æ–≤–æ')
def ask_for_date(message):
    bot.send_message(message.chat.id, "üìÖ –í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É –ø—Ä–æ–ø—É—Å–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –î–î.–ú–ú.–ì–ì–ì–ì:")
    bot.register_next_step_handler(message, ask_for_reason)
–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
python
Copy
@bot.message_handler(func=lambda message: True)
def handle_unknown(message):
    bot.send_message(message.chat.id, "‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏.")
–ü—Ä–∏–º–µ—Ä –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π /start.

–ë–æ—Ç –≤—ã–≤–æ–¥–∏—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:

üìã –°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

üìú –°–ø–∏—Å–æ–∫ –ø—Ä–æ–≥—É–ª—å—â–∏–∫–æ–≤

üßπ –û—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–æ–≥—É–ª—å—â–∏–∫–æ–≤:

–í—ã–±–∏—Ä–∞–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏–∑ —Å–ø–∏—Å–∫–∞.

–£–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞—Ç—É –∏ –ø—Ä–∏—á–∏–Ω—É –ø—Ä–æ–ø—É—Å–∫–∞.

–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª.

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –±–æ—Ç–∞
–£–¥–æ–±—Å—Ç–≤–æ: –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏.

–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö.

–ì–∏–±–∫–æ—Å—Ç—å: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª—è—Ç—å –∑–∞–ø–∏—Å–∏ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É.



